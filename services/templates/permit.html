{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Business Permits | Bende Local Government Area</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Register your business or renew your operating permit in Bende LGA. Fast tracking for SME and Corporate licenses." />
    <meta name="keywords" content="Bende Business Permit, LGA License, Shop Permit, Corporate Tax, SME Registration Bende" />
    <meta name="author" content="Bende Local Government" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Business Permits | Bende Local Government Area" />
    <meta property="og:description" content="Register your business or renew your operating permit in Bende LGA. Fast tracking for SME and Corporate licenses." />
    <meta property="og:image" content="{% static 'img/ABIA.png' %}" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Business Permits | Bende LGA" />
    <meta name="twitter:description" content="Register your business or renew your operating permit in Bende LGA. Fast tracking for SME and Corporate licenses." />
    <meta name="twitter:image" content="{% static 'img/ABIA.png' %}" />

    <!-- Fonts: Poppins & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Poppins:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- FontAwesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      /* --- CSS VARIABLES & RESET --- */
      :root {
        --dark-blue: #0a1a2f;
        --green: #1faf5a;
        --white: #ffffff;
        --gold: #c8a43f;
        --gray-light: #f4f7f6;
        --text-dark: #333333;
        --text-light: #666666;
        --font-head: "Poppins", sans-serif;
        --font-body: "Inter", sans-serif;
        --radius: 12px; /* Slightly rounder for this sleek look */
        --shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
        --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-body);
        background-color: var(
          --gray-light
        ); /* Light gray background for the app feel */
        color: var(--text-dark);
        line-height: 1.6;
        overflow-x: hidden;
      }

      a {
        text-decoration: none;
        color: inherit;
        transition: var(--transition);
      }
      ul {
        list-style: none;
      }

      /* --- UTILITIES --- */
      .container {
        max-width: 95%;
        margin: 0 auto;
        padding: 0;
      }
      .text-center {
        text-align: center;
      }

      .btn {
        display: inline-block;
        padding: 14px 32px;
        border-radius: var(--radius);
        font-weight: 600;
        cursor: pointer;
        border: none;
        font-family: var(--font-head);
        font-size: 1rem;
        transition: var(--transition);
      }
      .btn-green {
        background-color: var(--green);
        color: var(--white);
        box-shadow: 0 4px 15px rgba(31, 175, 90, 0.3);
      }
      .btn-green:hover {
        background-color: #168a46;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(31, 175, 90, 0.4);
      }

      /* --- HEADER (Consistent) --- */
      .top-bar {
        background-color: var(--dark-blue);
        color: var(--white);
        padding: 10px 0;
        font-size: 0.9rem;
      }
      .top-bar .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      header {
        background: var(--white);
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 80px;
      }
      .logo {
        font-family: var(--font-head);
        font-weight: 700;
        font-size: 1.5rem;
        color: var(--dark-blue);
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .logo i {
        color: var(--green);
        font-size: 1.8rem;
      }
      .nav-links {
        display: flex;
        gap: 30px;
        align-items: center;
      }
      .nav-links a:hover {
        color: var(--green);
      }
      .mobile-toggle {
        display: none;
        font-size: 1.5rem;
        cursor: pointer;
      }

      /* --- SLEEK HERO SECTION --- */
      .sleek-hero {
        background: var(--dark-blue);
        color: white;
        padding: 80px 0 140px 0; /* Extra bottom padding for overlap */
        text-align: center;
        position: relative;
        background-image: radial-gradient(
          circle at 80% 20%,
          rgba(200, 164, 63, 0.15) 0%,
          transparent 40%
        );
      }
      .sleek-hero h1 {
        font-size: 3rem;
        margin-bottom: 10px;
      }
      .sleek-hero p {
        opacity: 0.8;
        font-size: 1.1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      /* --- MAIN CARD CONTAINER --- */
      .permit-container {
        max-width: 900px;
        margin: -100px auto 60px auto; /* Overlap effect */
        background: var(--white);
        border-radius: 20px;
        box-shadow: var(--shadow);
        padding: 40px;
        position: relative;
        z-index: 10;
      }

      /* --- TOGGLE SWITCH (New vs Renewal) --- */
      .mode-toggle {
        display: flex;
        background: #f0f2f5;
        padding: 5px;
        border-radius: 50px;
        margin: 0 auto 40px auto;
        max-width: 400px;
        position: relative;
      }
      .toggle-btn {
        flex: 1;
        padding: 12px;
        text-align: center;
        border-radius: 40px;
        cursor: pointer;
        font-weight: 600;
        color: var(--text-light);
        transition: var(--transition);
        position: relative;
        z-index: 2;
      }
      .toggle-btn.active {
        color: var(--white);
      }
      /* Sliding Background for Toggle */
      .toggle-bg {
        position: absolute;
        top: 5px;
        left: 5px;
        width: calc(50% - 5px);
        height: calc(100% - 10px);
        background: var(--dark-blue);
        border-radius: 40px;
        transition: var(--transition);
        z-index: 1;
      }
      /* Move bg when second item is active */
      .mode-toggle[data-active="renewal"] .toggle-bg {
        transform: translateX(100%);
      }

      /* --- CATEGORY CARDS --- */
      .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      .cat-card {
        border: 2px solid #eee;
        border-radius: var(--radius);
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: var(--transition);
        opacity: 0.7;
      }
      .cat-card:hover {
        border-color: #ccc;
        opacity: 1;
      }

      .cat-card.selected {
        border-color: var(--green);
        background-color: #f0fdf4;
        opacity: 1;
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(31, 175, 90, 0.15);
      }
      .cat-card i {
        font-size: 2rem;
        color: var(--dark-blue);
        margin-bottom: 10px;
      }
      .cat-card h4 {
        font-size: 1rem;
        color: var(--dark-blue);
        margin-bottom: 5px;
      }
      .cat-card .price {
        color: var(--green);
        font-weight: 700;
        font-size: 1.1rem;
      }

      /* --- FORM STYLES --- */
      .form-section {
        display: none;
        animation: fadeIn 0.4s ease;
      }
      .form-section.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .input-group {
        position: relative;
        margin-bottom: 25px;
      }
      .input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--dark-blue);
        font-size: 0.9rem;
      }
      .input-field {
        width: 100%;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        font-family: var(--font-body);
        transition: var(--transition);
        background: #fafafa;
      }
      .input-field:focus {
        background: #fff;
        border-color: var(--green);
        outline: none;
        box-shadow: 0 0 0 4px rgba(31, 175, 90, 0.1);
      }

      /* Grid for inputs */
      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      /* Document Upload Zone */
      .upload-zone {
        border: 2px dashed #ccc;
        padding: 30px;
        text-align: center;
        border-radius: var(--radius);
        background: #fdfdfd;
        cursor: pointer;
        margin-bottom: 25px;
      }
      .upload-zone:hover {
        border-color: var(--green);
        background: #f4fff8;
      }

      /* Notice Box */
      .notice-box {
        background: #fff8e1;
        border-left: 4px solid var(--gold);
        padding: 15px;
        font-size: 0.9rem;
        margin-bottom: 25px;
        border-radius: 4px;
      }

      /* --- FOOTER (Consistent) --- */
      footer {
        background-color: var(--dark-blue);
        color: #b0b8c2;
        padding: 60px 0 0 0;
        font-size: 0.9rem;
        margin-top: 60px;
      }
      .footer-grid {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        gap: 40px;
        margin-bottom: 40px;
      }
      .footer-col h4 {
        color: var(--white);
        margin-bottom: 20px;
        font-family: var(--font-head);
      }
      .footer-col ul li {
        margin-bottom: 10px;
      }
      .footer-bottom {
        background: rgba(0, 0, 0, 0.2);
        padding: 20px 0;
        text-align: center;
      }

      @media (max-width: 768px) {
        html {
          font-size: 85%;
        }
        .form-row {
          grid-template-columns: 1fr;
        }
        .permit-container {
          margin: -50px 20px 40px 20px;
          padding: 20px;
        }
        .nav-links {
          display: none;
        } /* Simplified mobile handling for brevity */
        .mobile-toggle {
          display: block;
          color: var(--dark-blue);
        }
        .footer-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <nav>
          <div class="logo"><i class="fas fa-landmark"></i> Bende LGA</div>
          <ul class="nav-links">
            <li><a href="{% url 'base' %}">Home</a></li>
            <li><a href="{% url 'about' %}">About</a></li>
            <li>
              <a href="{% url "base" %}#services" style="color: var(--green); font-weight: 700"
                >Services</a
              >
            </li>
            <li><a href="#">Projects</a></li>
            <li><a href="{% url "news" %}">News</a></li>
            <li><a href="{% url 'contact' %}">Contact</a></li>
            <li><a href="{% url 'dashboard' %}" class="btn btn-green">Dashboard</a></li>
          </ul>
          <div class="mobile-toggle"><i class="fas fa-bars"></i></div>
        </nav>
      </div>
    </header>

    <!-- Sleek Hero -->
    <section class="sleek-hero">
      <div class="container">
        <h1>Business Permits & Licensing</h1>
        <p>Register a new business or renew your operating license securely.</p>
      </div>
    </section>

    <!-- Main App Interface -->
    <div class="permit-container">
      <!-- Toggle Switch -->
      <div class="mode-toggle" id="modeToggle" data-active="new">
        <div class="toggle-bg"></div>
        <div class="toggle-btn active" onclick="switchMode('new')">
          New Registration
        </div>
        <div class="toggle-btn" onclick="switchMode('renewal')">Renewal</div>
      </div>

      <!-- DJANGO FORM START -->
      <!-- Note: In Django, add method="POST" action="" and {% csrf_token %} -->
      <form id="permitForm" method="POST" enctype="multipart/form-data">
        <!-- Hidden Input for Logic -->
        <input type="hidden" name="application_type" id="appType" value="new" />
        <input
          type="hidden"
          name="business_category"
          id="bizCategory"
          value=""
        />
        <input type="hidden" name="fee_amount" id="feeAmount" value="" />

        <!-- SECTION: NEW REGISTRATION -->
        <div id="sectionNew" class="form-section active">
          <div class="text-center" style="margin-bottom: 30px">
            <h3 style="color: var(--dark-blue); margin-bottom: 5px">
              Select Business Category
            </h3>
            <p style="color: #777; font-size: 0.9rem">
              Fees are calculated based on business size.
            </p>
          </div>

          <!-- Interactive Cards -->
          <div class="category-grid">
            <div class="cat-card" onclick="selectCategory(this, 'sme', 5000)">
              <i class="fas fa-store"></i>
              <h4>SME / Kiosk</h4>
              <div class="price">₦5,000</div>
            </div>
            <div class="cat-card" onclick="selectCategory(this, 'mid', 15000)">
              <i class="fas fa-building"></i>
              <h4>Medium Enterprise</h4>
              <div class="price">₦15,000</div>
            </div>
            <div class="cat-card" onclick="selectCategory(this, 'corp', 50000)">
              <i class="fas fa-city"></i>
              <h4>Corporate / Factory</h4>
              <div class="price">₦50,000</div>
            </div>
            <div
              class="cat-card"
              onclick="selectCategory(this, 'special', 25000)"
            >
              <i class="fas fa-utensils"></i>
              <h4>Hospitality</h4>
              <div class="price">₦25,000</div>
            </div>
          </div>

          <div class="form-row">
            <div class="input-group">
              <label>Business Name</label>
              <input
                type="text"
                name="business_name"
                class="input-field"
                placeholder="e.g. Bende Agro Allied Ltd"
              />
            </div>
            <div class="input-group">
              <label>CAC Registration Number (Optional)</label>
              <input
                type="text"
                name="cac_number"
                class="input-field"
                placeholder="RC123456"
              />
            </div>
          </div>
        </div>

        <!-- SECTION: RENEWAL -->
        <div id="sectionRenewal" class="form-section">
          <div class="notice-box">
            <i class="fas fa-info-circle"></i> &nbsp; Please enter your previous
            Permit ID found on your last certificate.
          </div>
          <div class="input-group">
            <label>Previous Permit ID / Reference Number</label>
            <input
              type="text"
              name="permit_id"
              class="input-field"
              placeholder="BEN-BIZ-2023-XXXX"
            />
            <small style="color: var(--green); cursor: pointer"
              >Forgot ID? Click to recover.</small
            >
          </div>
          <!-- Renewal content usually fetches data, but we provide fields just in case -->
          <div class="form-row">
            <div class="input-group">
              <label>Current Business Name</label>
              <input
                type="text"
                name="renew_business_name"
                class="input-field"
              />
            </div>
            <div class="input-group">
              <label>Year of Last Payment</label>
              <select name="last_payment_year" class="input-field">
                <option>2024</option>
                <option>2023</option>
                <option>2022</option>
              </select>
            </div>
          </div>
        </div>

        <!-- SHARED FIELDS (Address & Contact) -->
        <div
          style="border-top: 1px dashed #ddd; margin: 30px 0; padding-top: 30px"
        >
          <h4 style="color: var(--dark-blue); margin-bottom: 20px">
            Contact & Location Details
          </h4>

          <div class="input-group">
            <label>Business Address (Within Bende LGA)</label>
            <input
              type="text"
              name="business_address"
              class="input-field"
              placeholder="Street Address, Town"
              required
            />
          </div>

          <div class="form-row">
            <div class="input-group">
              <label>Owner's Full Name</label>
              <input
                type="text"
                name="owner_name"
                class="input-field"
                required
              />
            </div>
            <div class="input-group">
              <label>Phone Number</label>
              <input
                type="tel"
                name="phone_number"
                class="input-field"
                required
              />
            </div>
          </div>

          <div class="input-group">
            <label>Email Address</label>
            <input type="email" name="email" class="input-field" required />
          </div>

          <!-- File Upload -->
          <div class="input-group">
            <label>Supporting Documents (CAC Cert, Tax ID, etc)</label>
            <div class="upload-zone" id="dropZone">
              <i
                class="fas fa-cloud-upload-alt"
                style="font-size: 2rem; color: #ccc"
              ></i>
              <p style="margin-top: 10px; color: #666">
                Drag & drop files here or click to browse
              </p>
              <input
                type="file"
                name="documents"
                id="fileInput"
                style="display: none"
                multiple
              />
            </div>
            <div
              id="fileList"
              style="font-size: 0.9rem; color: var(--green)"
            ></div>
          </div>
        </div>

        <!-- Submit Action -->
        <div class="text-center">
          <button
            type="submit"
            class="btn btn-green"
            style="width: 100%; max-width: 300px"
          >
            <span id="btnText">Calculate & Proceed</span>
            <i class="fas fa-arrow-right" style="margin-left: 10px"></i>
          </button>
          <p style="margin-top: 15px; font-size: 0.85rem; color: #888">
            <i class="fas fa-lock"></i> Secure Payment Gateway powered by
            Remita/Interswitch
          </p>
        </div>
      </form>
    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-grid">
          <div class="footer-col">
            <div class="logo" style="color: white; margin-bottom: 15px">
              <i class="fas fa-landmark" style="color: var(--green)"></i> Bende
              LGA
            </div>
            <p style="opacity: 0.7">
              Modernizing governance through technology.
            </p>
          </div>
          <div class="footer-col">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="#">Verify Permit</a></li>
              <li><a href="#">Tax Rates</a></li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>Support</h4>
            <ul>
              <li><a href="#">Help Center</a></li>
              <li><a href="#">Report Issue</a></li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>Socials</h4>
            <ul style="display: flex; gap: 10px">
              <li>
                <a href="#"><i class="fab fa-facebook"></i></a>
              </li>
              <li>
                <a href="#"><i class="fab fa-twitter"></i></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2023 Bende LGA. Powered by <strong>XantSpace</strong></p>
        </div>
      </div>
    </footer>

    <!-- JS Logic -->
    <script>
      // --- 1. Toggle Switch Logic ---
      function switchMode(mode) {
        const toggleContainer = document.getElementById("modeToggle");
        const toggleBtns = document.querySelectorAll(".toggle-btn");
        const sectionNew = document.getElementById("sectionNew");
        const sectionRenew = document.getElementById("sectionRenewal");
        const appTypeInput = document.getElementById("appType");
        const btnText = document.getElementById("btnText");

        // Visual Toggle
        toggleContainer.setAttribute("data-active", mode);

        toggleBtns.forEach((btn) => btn.classList.remove("active"));
        if (mode === "new") {
          toggleBtns[0].classList.add("active");
          sectionNew.classList.add("active");
          sectionRenew.classList.remove("active");
          appTypeInput.value = "new";
          btnText.innerText = "Calculate & Proceed";
        } else {
          toggleBtns[1].classList.add("active");
          sectionNew.classList.remove("active");
          sectionRenew.classList.add("active");
          appTypeInput.value = "renewal";
          btnText.innerText = "Verify & Renew";
        }
      }

      // --- 2. Category Selection Logic ---
      function selectCategory(element, catValue, fee) {
        // Remove active class from all cards
        document.querySelectorAll(".cat-card").forEach((card) => {
          card.classList.remove("selected");
        });

        // Add active class to clicked
        element.classList.add("selected");

        // Update Hidden Inputs for Django
        document.getElementById("bizCategory").value = catValue;
        document.getElementById("feeAmount").value = fee;

        // Optional: Update Button Text
        const formattedFee = fee.toLocaleString("en-NG");
        document.getElementById("btnText").innerText = `Pay ₦${formattedFee}`;
      }

      // --- 3. File Upload Interaction ---
      const dropZone = document.getElementById("dropZone");
      const fileInput = document.getElementById("fileInput");
      const fileList = document.getElementById("fileList");

      dropZone.addEventListener("click", () => fileInput.click());

      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) {
          fileList.innerHTML = `<i class="fas fa-check"></i> ${e.target.files.length} file(s) selected`;
          dropZone.style.borderColor = "var(--green)";
          dropZone.style.backgroundColor = "#F0FDF4";
        }
      });

      // --- 4. Django Form Simulation ---
      document
        .getElementById("permitForm")
        .addEventListener("submit", function (e) {
          // Note: In real Django usage, remove e.preventDefault() to let the form POST
          e.preventDefault();

          const btn = this.querySelector('button[type="submit"]');
          const originalText = btn.innerText;

          // Validation check (Basic)
          const type = document.getElementById("appType").value;
          const category = document.getElementById("bizCategory").value;

          if (type === "new" && category === "") {
            alert("Please select a Business Category first.");
            return;
          }

          btn.innerHTML =
            '<i class="fas fa-spinner fa-spin"></i> Processing...';
          btn.style.opacity = "0.8";

          // Simulating Backend Delay
          setTimeout(() => {
            alert("Data validated! Redirecting to Payment Gateway...");
            btn.innerHTML = originalText;
            btn.style.opacity = "1";
            // In Django: window.location.href = "";
          }, 1500);
        });
    </script>
  </body>
</html>
